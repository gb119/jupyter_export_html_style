{%- extends 'lab/base.html.j2' -%}

{#
This is a custom template that extends the lab base HTML template
and overrides the cell blocks to include style attributes from cell metadata.
#}

{%- block codecell -%}
{%- if not cell.outputs -%}
{%- set no_output_class="jp-mod-noOutputs" -%}
{%- endif -%}
{%- if not resources.global_content_filter.include_input -%}
{%- set no_input_class="jp-mod-noInput" -%}
{%- endif -%}
{%- if cell.metadata.style -%}
<div {{ cell_id_anchor(cell) }} class="jp-Cell jp-CodeCell jp-Notebook-cell {{ no_output_class }} {{ no_input_class }} {{ celltags(cell) }}" style="{{ cell.metadata.style }}">
{%- else -%}
<div {{ cell_id_anchor(cell) }} class="jp-Cell jp-CodeCell jp-Notebook-cell {{ no_output_class }} {{ no_input_class }} {{ celltags(cell) }}">
{%- endif -%}
{{ super() }}
</div>
{%- endblock codecell -%}

{%- block markdowncell scoped -%}
{%- if cell.metadata.style -%}
<div {{ cell_id_anchor(cell) }} class="jp-Cell jp-MarkdownCell jp-Notebook-cell" style="{{ cell.metadata.style }}">
{%- else -%}
<div {{ cell_id_anchor(cell) }} class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
{%- endif -%}
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
{%- if resources.global_content_filter.include_input_prompt-%}
    {{ self.empty_in_prompt() }}
{%- endif -%}
<div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput {{ celltags(cell) }}" data-mime-type="text/markdown">
{%- if resources.should_sanitize_html %}
{%- set html_value=cell.source  | markdown2html | strip_files_prefix | clean_html -%}
{%- else %}
{%- set html_value=cell.source  | markdown2html | strip_files_prefix -%}
{%- endif %}
{{ html_value }}
</div>
</div>
</div>
</div>
{%- endblock markdowncell -%}

{%- block rawcell scoped -%}
{%- if cell.metadata.style -%}
<div class="jp-Cell jp-RawCell jp-Notebook-cell" style="{{ cell.metadata.style }}">
{%- else -%}
<div class="jp-Cell jp-RawCell jp-Notebook-cell">
{%- endif -%}
{{ self.raw_cell_content(cell) }}
</div>
{%- endblock rawcell -%}

{%- block unknowncell scoped -%}
{%- if cell.metadata.style -%}
<div class="jp-Cell jp-UnknownCell jp-Notebook-cell" style="{{ cell.metadata.style }}">
{%- else -%}
<div class="jp-Cell jp-UnknownCell jp-Notebook-cell">
{%- endif -%}
{{ super() }}
</div>
{%- endblock unknowncell -%}
